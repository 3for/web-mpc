<html>
<head>
	<title>Data Unmasker</title>
    <script type="text/javascript" src="script/jquery-1.11.2.js"></script>
    <script type="text/javascript" src="script/underscore.js"></script>
    <script type="text/javascript" src="script/jsencrypt.js"></script>
    <link rel="stylesheet" type="text/css" href="style/bootstrap/css/bootstrap.css">
    <style type="text/css">
        pre {
            text-align: left;
        }
    </style>
</head>
<body>
	<div class="container">
		<div class="page-header">
            <h1>Aggregate Data Unmasker</h1>
        </div>
        
        <h4>Input Session Key</h4>
        <input type=text id="sessKey" placeholder="Session Key"/>
        
        <h4>Upload Private Key  <small>(Note this does not upload the key to the network)</small></h4>
        <input type=file id="maskKey"/>

        <br>
        <br>

        <button id="unmask" class="btn btn-primary">Unmask Data</button>

        <br><br>
        <pre id="result"></pre>
        <script type="text/javascript">

        $('#unmask').on('click', function() {
            var maskKey = $('#maskKey').get(0),
                sessKey = $('#sessKey').val(),
                keyReader = new FileReader();
            
            if(maskKey.files.length && maskData.files.length)
            {
                keyReader.readAsText(maskKey.files[0]);
                $(keyReader).on('load', function(e){
                    var privkey = e.target.result,
                        decryptObj = new JSEncrypt();
                    decryptObj.setPrivateKey(privkey);
                    
                    $.ajax({});
                });
            }
            else
            {
                alert("Please upload both files before continuing");
            }
        });

        </script>
    </div>
</body>
</html>